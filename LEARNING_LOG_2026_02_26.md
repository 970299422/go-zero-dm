# 学习总结 (2026-02-26)

太棒了！今天你的进步非常大，我们不仅完成了用户注册的全流程开发，还深入理解了 Go 语言最核心的几个概念。

## 1. 项目实战：身份认证服务 (Identify Service)

今天我们把后端服务从单纯的 "Hello World" 推进到了 **真实的业务开发阶段**。

### ✅ 完成的功能
1.  **用户注册 (`/register`)**:
    *   **查重**: 使用 GORM (`Where(...).First(...)`) 检查用户名是否存在。
    *   **密码加密**: 引入 `bcrypt` 库，使用 `GenerateFromPassword` 将明文密码转为哈希存储。
    *   **自动登录**: 注册成功后，直接签发 JWT Token，体验丝滑。
	*	**SQLite 集成**: 成功切换了纯 Go 版驱动 (`github.com/glebarez/sqlite`)，不再依赖 CGO，完美适配 Windows 环境。

2.  **用户登录 (`/login`)**:
    *   **真实验证**: 彻底移除了硬编码的 `admin/123456`。
    *   **密码比对**: 使用 `bcrypt.CompareHashAndPassword` 安全地校对数据库中的密文和用户输入的明文。
    *   **Token 签发**: 登录成功返回 JWT，并统一了过期时间格式。

3.  **接口测试**:
    *   学会了在 Windows PowerShell 下正确使用 `Invoke-RestMethod` 发送 POST 请求。
    *   成功验证了注册、登录闭环，拿到了长长的 `accessToken`。

---

## 2. 核心知识点 (深度理解)

今天我们在写代码的过程中，顺便攻克了 Go 语言的几个难点：

### 🔑 1. 指针接收者 `(u *User)` vs 值接收者 `(u User)`
*   **你可以修改对象吗？**
    *   `(u *User)`: **能！** 就像 JS 里的 `this`，改了属性会生效。**推荐默认用这个。**
    *   `(u User)`: **不能！** 操作的是复印件，改了也白改（除非你不需要修改，且对象很小）。

### 🦆 2. 接口与“鸭子类型” (Duck Typing)
*   **无需 `implements`**: 比如 `Speaker` 接口要 `Speak()` 方法。
*   **只要你会做，你就是**: 只要 `Cat` 结构体有一个 `func (c *Cat) Speak()` 方法，编译器就自动认定它是 `Speaker`。
*   **方法定义在外面**: Go 的 `struct` 只定义数据，方法是用 `func (Receiver) MethodName()` 的语法“粘”上去的。

### 🛡️ 3. 安全与加密 (`bcrypt`)
*   **绝对不存明文**: 数据库里永远只存看不懂的 Hash 值。
*   **盐 (Salt)**: 即使两个用户密码都是 `123456`，存进数据库的乱码也是不一样的。

### 🔌 4. GORM 基础
*   `First(&user)`: 为什么要传 `&user`？因为函数内部要修改 user 变量的值（填入数据）。
*   `Where("username = ?", name)`: 使用 `?` 占位符防止 SQL 注入。

---

## 3. 下一步计划

现在的 User 服务已经具备了最基础的核心能力（注册+登录+数据库）。接下来的方向可以是：

1.  **鉴权中间件**: 有了 Token，怎么用它保护其他接口？（比如“获取用户信息”接口，必须登录才能调）。
2.  **RPC 服务拆分**: 如果以后有“订单服务”想查用户信息，该怎么调用 User 服务？
3.  **前端联调**: 尝试用 Postman 或者写一个简单的前端页面来调调看。

今天的学习非常扎实，不仅 Code 跑通了，原理也搞懂了。继续保持！🚀
